# 12월 3일의 TIL

## Diffie-Hellm

디피-헬먼은 키교환 알고리즘으로 공유하는 대칭키를 설정하기 위해 사용한다. 

- 공개키 암호화의 시초이다.
- ***키교환 알고리즘*** 을 사용한다.
- RSA와는 다르게 키교환만하고 암호화나 전자서명은 사용하지 않는다.
- 수학적 난제인 이산로그난제를 기초로 하고 있다.
- TSL/SSL의 키교환으로 아직도 사용되고 있다.

### 과정

1. primm number P , gereator G 를 선택한다.

    x ∈ { 1,2,...... , p-1}  그리고 미지수 n이 있을 때 

    이 성립된다. 

2. 앨리스의 private key A를 선택한다.
3. 밥의 private key B를 선택한다.
4. 앨리스는 g(a) mod p를 밥에게 전달한다.
5. 밥은 g(b) mod p 를 앨리스에게 전달한다.

`⇒ 여기서 공격자는 엿듣고 내용을 다 알 수 있기 때문에 1~5까지 주고받은 모든 키를 알 수 있다.(private key 제외)`

 6. 밥과 앨리스는 전달받은 값에 자신의 private key를 곱해주면 

**g(ab) mod p**를 알 수 있게 된다. 이게 k가 된다.

 7. 공격자는 private key를 모르기 때문에 k를 구할 수 없다.

### 취약점 - MIM

🤔**man-in-the-middle attack? ( 중간에 누군가 있다.)**

앨리스와 밥사이에 누군가가 앨리스와 밥인척하는 것.(도청과 동시에 사칭)

공격자가 키교환에 참여해서 중간에서 양쪽 모두와의 키를 새로 생성하는 것.

- 기밀성이 깨졌다.
- integrity가 깨졌다. → 수정가능

### MIM을 방지하는 방법

- symmetric key 를 사용한다. ( 예전에 사용했던,,, 둘만 아는 k)
- public key를 사용한다.
- 전자 서명을 사용한다.

### DH를 여전히 쓰는 이유

그래도 이게 좋아서 MIM을 방지하면서 여전히 사용하고 있다.

### 공개키가 사용되는 곳

- 기밀성

    안전하지 않은 채널을 이용해서 안전하게 데이터를 보내는 법

- authentication 에 많이 사용된다. 
MIM 때문에 authentication과 키 교환은 항상 셋트로 간다.
- non-repudiation
대칭키에서는 보장되지 않고 공개키에서만 보장되는 특징이다.

    private key는 당사자밖에 모르기때문에 자신이 했다는 것을 부인할 수가 없다.  대칭키에서는 키를 둘다 가지고 있기 때문에 앨리스와 밥 둘 다 할 수 있다고 주장할 있다.
    
<br><br>  
   
## Elliptic Curve Cryptography
  DH 할만 : key 교환에만 사용됨 . discard loganighm 난제를 가지고 만들었다.

           문제 mim attack가 있지만 쓸만함, 섞어서 쓰면 된다.

RSA : 서명, 암호화 , prime fecter,,, 소인수분해 난제를 가지고 만들었음

          key size가 커지는 중,,,, 

⇒ 그래서 등장! **elliptic curve**

키 교환과 서명에 사용이 가능함, RSA보다 빠르다. 그리고 key size가 작다.

뜨는 해!! 

RSA와 같은 보안수준을 유지하면서도 key size가 월등히 작다.

🤔**elliptic curve란?????**

 $E : y^2 = x^3 +ax + b$ 

어떠한 p1과 p2를 골라도 연결하는 선과 곡선은 항상 추가적인 점 하나에서 만난다.

P(3) : 추가적인 점의 역수

⇒ $P(1) + P(2) = P(3)$

**보안에 사용하는 방법**

정수 상에서만 사용해서 쓴다. (mod p)를 한다! 

정수로 바꾸는 과정에서 보안에 안정적인 그래프들이 등장한다.

1. secp256k1

    $E = y^2 = (x^3 + 7) over(F)$

**난제가 무엇이냐~~~!!**

public key  = kg  로부터 k를 알아내는 것이 하늘이 별따기이다. 

나눗셈이 안된다,,,,, 256승의 경우의 수를 전부 다 따져봐야 하기때문에,,

곱셈을 정의할 수 있는데 곱셈을 어떻게 정의하냐면  k*p를 계산하고 싶으면 p를 k번 더해야 한다. p가 같으면 탄젠트를 의미한다.


## 한줄평
DH는 public private key를 사용해서 key exchage를 하자라는 것이다!!

분명 공개키의 시초랬는데 키 교환을 해서 헷갈렸는데 이해했다 하하하




