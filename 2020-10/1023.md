## android, java

### 기기 갤러리에서 사진 불러와서 이미지뷰에 뿌려주기

- 갤러리에서 사진을 불러올 때 , 단일선택 일 경우

```java
if(requestCode == IMAGE_REQUEST_CODE ){
            image = data.getData();
            ClipData clipData = data.getClipData();
            if(clipData == null){ // 이미지가 한장 선택됐을 때
                urione =data.getData();
                image_list.add(urione);
                if (img1.getDrawable() == null) {
                    img1.setImageURI(urione);
                    commu_img_explain1.setVisibility(View.VISIBLE);
                    remove1.setVisibility(View.VISIBLE);
                }
}
```

clipData는 기기내에서 여러장을 선택했을 때는 판별하는 거여서 clipData 또는 getData 로 판별하면 된다. 

- 여러장 선택일 경우

```java
if(clipData != null) { // 이미지가 여러장 선택됐을 때
        for (int i = 0; i <clipData.getItemCount(); i++) {
            if (i < clipData.getItemCount()) {
                urione = clipData.getItemAt(i).getUri();
                image_list.add(urione);
                switch (i) {
                    case 0:
                        if (img1.getDrawable() == null) {
                            img1.setImageURI(urione);
                            commu_img_explain1.setVisibility(View.VISIBLE);
                            remove1.setVisibility(View.VISIBLE);
                            break;
                        }
                    case 1:
                        if (img2.getDrawable() == null) {
                            img2.setImageURI(urione);
                            commu_img_explain2.setVisibility(View.VISIBLE);
                            remove2.setVisibility(View.VISIBLE);
                            break;
                        }
}
```

이건 기기내에서 여러장을 선택했을 경우 사용되는 건데 문제는 기기에서 사진을 선택할 수 있는 창을 여는 방법을 못찾았다.  `extra_allow_multiple` 을 사용하면 된다고 하는데 기기에 따라 되는 경우가 있고 아닌 경우가 있다고 해서 더 찾아봐야 할 것 같다,,, 해결,,, 하고 싶다,,,,,,,,,,,,

### 오류

- java.lang.outofmemoryerror

```java
java.lang.outofmemoryerror: failed to allocate a 38340876 byte allocation with 16774368 free bytes and 20mb until oom
```

메모리공간 부족으로 객체를 할당할 수 없을 때 생기는 오류이다. 비트맵을 다룰 때 가장 흔하게 발생하는 오류라고 한다. 

→ 해결방안

manifest의 aplication 부분에 `android:largeHeap="true"` 을 추가하면 해결된다.

- 리싸이클러뷰 초기화

버튼을 클릭함 → 리싸이클러뷰를 호출시킴

이러한 액션이 진행될 때 버튼을 누를때마다 DB에 저장되어있는 값들이 중복되서 불러오는 것을 방지하고 싶을 때 초기화를 원하는 부분에  `arrayList.clear();` 아이템 값이 들어있는 어레이리스트 초기화하기,,, 잊지말자,,,⭐

- 안드로이드 연결

연결이 아무리해도 실행이 안될때,,,, 잊지말자 안드로이드 업데이트,,, ,,,,,, 

삽질이 아니라 뻘짓으로 몇 일을 날린지 모르겠다 **잊지말자 안드로이드 업데이트**

---

## 한줄평

진짜진짜 오랜만에 안드로이드 했는데 역시 시간 수운삭 얼렁 마무리하자 Malive

출시하는 그 날 까지..ㅠㅠ
